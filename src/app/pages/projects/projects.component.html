<section class="projects-wrapper container">

  <!-- Hero Section -->
  <div class="hero-section">
    <h1>Projects</h1>
    <p class="hero-subtitle">Here are some of my most exciting projects, showcasing modern web development with Angular.</p>

    <!-- Stats Example -->
    <div class="stats">
      <div class="stat-item">
        <span class="stat-number">{{filteredProjects.length}}</span>
        <span class="stat-label">Total Projects</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">5</span>
        <span class="stat-label">Featured</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">3</span>
        <span class="stat-label">In Progress</span>
      </div>
    </div>
  </div>

  <!-- Controls Section -->
  <div class="controls-section">
    <!-- Search -->
    <div class="search-container">
      <div class="search-wrapper">
        <input
          class="search-input"
          type="text"
          placeholder="Search projects..."
          [ngModel]="searchText"
          (ngModelChange)="onSearch($event)"
        />
        <span class="search-icon">🔍</span>
        <span *ngIf="searchText" class="search-clear" (click)="onSearch('')">×</span>
        <span class="search-hint">Type to filter projects</span>
      </div>
    </div>

    <!-- Category Filters -->
    <div class="filters-container">
      <div class="category-filters" role="tablist" aria-label="Filter projects">
        <button
          *ngFor="let c of categories"
          class="filter-btn"
          [class.active]="selected() === c"
          (click)="selected.set(c)"
          role="tab"
          [attr.aria-selected]="selected() === c"
        >
          <span class="filter-text">{{c}}</span>
          <span class="filter-count">{{getCategoryCount(c)}}</span>
        </button>
      </div>
    </div>

    <!-- View Controls -->
    <div class="view-controls">
      <div class="view-modes">
        <button class="view-btn" [class.active]="viewMode==='grid'" (click)="viewMode='grid'">Grid</button>
        <button class="view-btn" [class.active]="viewMode==='list'" (click)="viewMode='list'">List</button>
      </div>
      <button class="export-btn" (click)="exportProjects()">
        <span class="export-icon">📤</span> Export
      </button>
    </div>
  </div>

  <!-- Projects Section -->
  <div class="projects-section">
    <div class="section-header">
      <div class="results-count">{{filteredProjects.length}} Results</div>
      <div class="active-filters">
        <span *ngFor="let f of activeFilters" class="active-filter">
          {{f}} <button (click)="removeFilter(f)">×</button>
        </span>
      </div>
    </div>

    <!-- Projects Container -->
    <div class="projects-container" [ngClass]="{'grid-view': viewMode==='grid', 'list-view': viewMode==='list'}">
      <app-project-card
        *ngFor="let p of filteredProjects; let i = index"
        [project]="p"
        (preview)="previewSrc.set($event)"
        @fadeInUp
        appReveal
        [revealDelay]="i*80"
      ></app-project-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="!filteredProjects.length" class="empty-state">
      <span class="empty-icon">📂</span>
      <h2 class="empty-title">No Projects Found</h2>
      <p class="empty-description">Try adjusting your filters or search terms to find projects.</p>
      <div class="empty-actions">
        <button class="empty-btn" (click)="resetFilters()">Reset Filters</button>
        <button class="empty-btn primary" (click)="addProject()">Add Project</button>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <app-lightbox
    *ngIf="previewSrc()"
    [src]="previewSrc()!"
    [alt]="'Preview ' + previewSrc()"
    (closed)="previewSrc.set(undefined)"
  ></app-lightbox>

  <!-- Back to Top -->
  <button class="back-to-top" (click)="scrollToTop()" [class.visible]="showBackToTop">↑</button>

</section>
